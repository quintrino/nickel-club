{% extends 'base.html' %}
{% block header %}
<h1>{% block title %}Admin - Members{% endblock %}</h1>
{% endblock %}

{% block pagestyle %}
<style>
.friends-table {
	width: 100%;
}
</style>
{% endblock %}


{% block content %}

<div>
	<h4>Add new club member</h3>
	<form action="{{ url_for('admin.create_member') }}" method="POST">
		<label for="name">Name</label>
		<input name="name" required>
		<label for="nickels">Nickels</label>
		<input name="nickels" type="number" value="0">
		<button type="submit" class="btn btn-primary">Add</button>
	</form>
</div>


<div class="accordion" id="accordionExample">
	{% for member in members %}
  <div class="accordion-item">
		<h2 class="accordion-header" id="headingMember{{member.id}}">
			<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMember{{member.id}}" aria-expanded="false" aria-controls="collapseMember{{member.id}}">
				{{ member.name }}: {{ member.nickels }} Nickels  
      </button>
    </h2>
		<div id="collapseMember{{member.id}}" class="accordion-collapse collapse" aria-labelledby="headingMember{{member.id}}">
      <div class="accordion-body">

				<form action="{{ url_for('admin.member', member_id=member.id) }}" method="POST">
					<div class="input-group mb-3">
						<span class="input-group-text">Set Nickels</span>
						<input name="nickels" id="nickelInputMember{{member.id}}" type="number" class="form-control" placeholder="Nickels" value="{{member.nickels}}" required>
						<button type="submit" class="btn btn-outline-primary">Set</button>
					</div>
				</form>
				<form action="{{ url_for('admin.member', member_id=member.id) }}" method="POST">
					<div class="input-group mb-3">
						<span class="input-group-text">Rename</span>
						<input name="name" id="nameInputMember{{member.id}}" class="form-control" placeholder="Name" value="{{member.name}}" required>
						<button type="submit" class="btn btn-outline-primary">Rename</button>
					</div>
				</form>
				<form action="{{ url_for('admin.delete_member', member_id=member.id) }}" method="GET">
					<div class="imput-group mb-3">
						<button type="submit" class="btn btn-danger">Delete</button>
					</div>
				</form>
      </div>
    </div>
  </div>
	{% else %}
	<p>There are no club members yet.</p>
	{% endfor %}
</div>

{% endblock %}
